<!DOCTYPE html><html lang=""><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><title>REST API testing - OpenTest</title><link href="/css/bootstrap.min.css" rel="stylesheet"><link href="/css/asciidoctor.css" rel="stylesheet"><link href="/css/italian-pop.css" rel="stylesheet"><link href="/css/pygments.css" rel="stylesheet"><link href="/css/style.css" rel="stylesheet"><link href="/css/slick.css" rel="stylesheet"><link href="/css/menu.css" rel="stylesheet"><link href="/css/home.css" rel="stylesheet"><link href="/css/footer.css" rel="stylesheet"><link rel="stylesheet" href="/css/document.css" media="screen" type="text/css"><link href="https://fonts.googleapis.com/css?family=Rubik" rel="stylesheet"><link href="https://fonts.googleapis.com/css?family=Pragati+Narrow" rel="stylesheet"> <script defer src="https://use.fontawesome.com/releases/v5.0.8/js/all.js"></script><meta name="keywords" content="opentest, selenium"></head><body><div id="menu-wrapper"><div class="container"><div class="row"><nav class="navbar main-menu" role="navigation"><div class="navbar-header"> <a class="navbar-brand" href="/"> <img src="/img/common/opentest.svg" /> OpenTest </a> <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-navbar-collapse-1"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button></div><div class="collapse navbar-collapse" id="bs-navbar-collapse-1"><ul class="nav navbar-nav navbar-right scrollable-menu"><li class="dropdown"> <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="true">Docs <span class="caret"></span></a><ul class="dropdown-menu"><li><a href="/docs/installation.html">Installation</a></li><li><a href="/docs/architecture.html">Architecture</a></li><li><a href="/docs/test-structure.html">Test structure</a></li><li><a href="/docs/test-action-types.html">Test action types</a></li><li><a href="/docs/test-data.html">Working with test data</a></li><li><a href="/docs/passing-data.html">Passing data between test steps</a></li><li><a href="/docs/data-driven-testing.html">Data-driven testing</a></li><li><a href="/docs/scripting-support.html">Scripting support</a></li></ul></li><li class="dropdown"> <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="true">Reference <span class="caret"></span></a><ul class="dropdown-menu"><li><a href="/reference/selenium-keywords.html">Selenium keywords</a></li><li><a href="/reference/appium-keywords.html">Appium keywords</a></li><li><a href="/reference/generic-keywords.html">Generic keywords</a></li><li><a href="/reference/javascript-api.html">JavaScript API</a></li></ul></li><li class="dropdown"> <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="true">Tutorials <span class="caret"></span></a><ul class="dropdown-menu"><li><a href="/tutorials/selenium-testing.html">Web testing</a></li><li><a href="/tutorials/appium-testing.html">Mobile testing</a></li><li><a href="/tutorials/api-testing.html">REST API testing</a></li></ul></li></ul></div></nav></div></div></div><div class="clearfix"></div><div class="main-content"><div class="page-content"><div class="container"><div class="row"><div class="col-md-3 hidden-sm hidden-xs" id="toc-col"><div id="docs-toc"><h3>Docs</h3><ul class="dropdown-menu1"><li><a href="/docs/installation.html">Installation</a></li><li><a href="/docs/architecture.html">Architecture</a></li><li><a href="/docs/test-structure.html">Test structure</a></li><li><a href="/docs/test-action-types.html">Test action types</a></li><li><a href="/docs/test-data.html">Working with test data</a></li><li><a href="/docs/passing-data.html">Passing data between<br>test steps </a></li><li><a href="/docs/data-driven-testing.html">Data-driven testing</a></li><li><a href="/docs/scripting-support.html">Scripting support</a></li></ul><h3>Reference</h3><ul class="dropdown-menu1"><li><a href="/reference/selenium-keywords.html">Selenium keywords</a></li><li><a href="/reference/appium-keywords.html">Appium keywords</a></li><li><a href="/reference/generic-keywords.html">Generic keywords</a></li><li><a href="/reference/javascript-api.html">JavaScript API</a></li></ul><h3>Tutorials</h3><ul class="dropdown-menu1"><li><a href="/tutorials/selenium-testing.html">Web testing</a></li><li><a href="/tutorials/appium-testing.html">Mobile testing</a></li><li><a href="/tutorials/api-testing.html">REST API testing</a></li></ul></div></div><div class="col-sm-9"><h1>REST API testing</h1><div class="admonitionblock note"><table><tr><td class="icon"><div class="title">Note</div></td><td class="content"> For this tutorial we will assume you are using Chrome on Windows, but the steps are almost identical for macOS or Linux.</td></tr></table></div><div class="olist arabic"><ol class="arabic"><li><p>If you haven&#8217;t done it already, please follow the instructions in the <a href="http://localhost:4000/docs/installation.html">installation</a> page, including the <a href="http://localhost:4000/docs/installation.html#quick-start">quick start</a> section to install OpenTest and create the default configuration files.</p><div class="paragraph"><p>You should now have the following directory structure (we will assume you created the <code>opentest</code> directory in the root of the C: drive; if your path differs, please adjust the commands in the following steps accordingly):</p></div><div class="listingblock"><div class="content"><pre class="pygments highlight"><code>C:\opentest
├── server
│   └── server.yaml
├── actor1
│   └── actor.yaml
└── test-repo
    └── ...</code></pre></div></div></li><li><p>Type the following two commands in two separate console windows to start the OpenTest server and actor:</p><div class="listingblock"><div class="content"><pre class="pygments highlight"><code>opentest server C:\opentest\server</code></pre></div></div><div class="listingblock"><div class="content"><pre class="pygments highlight"><code>opentest actor C:\opentest\actor1</code></pre></div></div></li><li><p>Open the server&#8217;s web UI at <a href="http://localhost:3000" class="bare">http://localhost:3000</a>.</p></li><li><p>From the menu, select <strong>Session</strong> &gt; <strong>Create Test Session</strong>. Select the test named <strong>GitHub API test</strong> and click <strong>Create session</strong>. Wait a few seconds for the test to complete. Refresh your browser to view the result of the test session.</p></li></ol></div><div class="paragraph"><p>The test we just ran consists of two test actions:</p></div><div class="ulist"><ul><li><p>The first action calls the <code>/repos/facebook/react/branches</code> API on <code>api.github.com</code> and saves the body of the response into a data property in the local data store (the local data store is where you save the data you need to share between test actions).</p></li><li><p>The second test action reads the data from the local data store and validates it by making sure that:</p><div class="ulist"><ul><li><p>some payload was returned;</p></li><li><p>the response payload is an array with at least one element (we&#8217;re not being very thorough, just checking that the <code>length</code> property is greater than 0).</p></li></ul></div></li></ul></div><div class="paragraph"><p>Here&#8217;s the full source of the test:</p></div><div class="listingblock"><div class="title">test-repo-path/tests/api/GitHub API test.yaml</div><div class="content"><pre class="pygments highlight"><code data-lang="yaml"><span></span><span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">description</span><span class="tok-p tok-p-Indicator">:</span> <span class="tok-p tok-p-Indicator">|</span>
  <span class="tok-no">Verify that the GitHub API returns the branches for the React repo</span>
<span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">actors</span><span class="tok-p tok-p-Indicator">:</span>
  <span class="tok-p tok-p-Indicator">-</span> <span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">actor</span><span class="tok-p tok-p-Indicator">:</span> <span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">ACTOR1</span>
    <span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">segments</span><span class="tok-p tok-p-Indicator">:</span>
      <span class="tok-p tok-p-Indicator">-</span> <span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">segment</span><span class="tok-p tok-p-Indicator">:</span> <span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">1</span>
        <span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">actions</span><span class="tok-p tok-p-Indicator">:</span>
          <span class="tok-p tok-p-Indicator">-</span> <span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">description</span><span class="tok-p tok-p-Indicator">:</span> <span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">Call the GET /repos/:owner/:repo/branches API</span>
            <span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">action</span><span class="tok-p tok-p-Indicator">:</span> <span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">org.getopentest.actions.HttpRequest</span>
            <span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">args</span><span class="tok-p tok-p-Indicator">:</span>
              <span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">url</span><span class="tok-p tok-p-Indicator">:</span> <span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">https://api.github.com/repos/facebook/react/branches</span>
              <span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">verb</span><span class="tok-p tok-p-Indicator">:</span> <span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">GET</span>
              <span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">$localData</span><span class="tok-p tok-p-Indicator">:</span>
                <span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">branches</span><span class="tok-p tok-p-Indicator">:</span> <span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">$readOutput(&quot;body&quot;);</span>

          <span class="tok-p tok-p-Indicator">-</span> <span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">description</span><span class="tok-p tok-p-Indicator">:</span> <span class="tok-p tok-p-Indicator">|</span>
              <span class="tok-no">Verify that the branches array was returned and</span>
              <span class="tok-no">is not empty</span>
            <span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">script</span><span class="tok-p tok-p-Indicator">:</span> <span class="tok-p tok-p-Indicator">|</span>
              <span class="tok-no">var branches = $localData(&quot;branches&quot;);</span>
              <span class="tok-no">if (!branches || !branches.length &gt; 0) {</span>
                  <span class="tok-no">$fail(&quot;Response body invalid or contains no branch elements.&quot;);</span>
              <span class="tok-no">} else {</span>
                  <span class="tok-no">$log($format(</span>
                    <span class="tok-no">&quot;The GitHub API returned {0} branches&quot;,</span>
                    <span class="tok-no">branches.length));</span>
              <span class="tok-no">}</span></code></pre></div></div><div class="paragraph"><p>API tests are usually much easier to build that UI tests. The formula you&#8217;re going to apply over and over (with small variations) is:</p></div><div class="olist arabic"><ol class="arabic"><li><p>Call an API using the the <a href="https://getopentest.org/reference/generic-keywords.html#httprequest">HttpRequest</a> keyword. Save the <code>body</code> output value to the local data store by using the <a href="https://getopentest.org/docs/passing-data.html#local-data-localdata">$localData</a> argument.</p></li><li><p>Add one or more script actions to read the response body from local data and validate its contents.</p></li></ol></div><div class="paragraph"><p>Here&#8217;s one more example of an API test. This one calls the <a href="https://jsonplaceholder.typicode.com/">JSONPlaceholder</a> fake REST API:</p></div><div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="yaml"><span></span><span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">description</span><span class="tok-p tok-p-Indicator">:</span> <span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">Creates a new blog post, then validates its ID and title</span>
<span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">actors</span><span class="tok-p tok-p-Indicator">:</span>
  <span class="tok-p tok-p-Indicator">-</span> <span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">actor</span><span class="tok-p tok-p-Indicator">:</span> <span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">ACTOR1</span>
    <span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">segments</span><span class="tok-p tok-p-Indicator">:</span>
      <span class="tok-p tok-p-Indicator">-</span> <span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">segment</span><span class="tok-p tok-p-Indicator">:</span> <span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">1</span>
        <span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">actions</span><span class="tok-p tok-p-Indicator">:</span>
          <span class="tok-p tok-p-Indicator">-</span> <span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">description</span><span class="tok-p tok-p-Indicator">:</span> <span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">Create a new blog post</span>
            <span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">action</span><span class="tok-p tok-p-Indicator">:</span> <span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">org.getopentest.actions.HttpRequest</span>
            <span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">args</span><span class="tok-p tok-p-Indicator">:</span>
              <span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">$localData</span><span class="tok-p tok-p-Indicator">:</span>
                <span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">postInfo</span><span class="tok-p tok-p-Indicator">:</span> <span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">$readOutput(&#39;body&#39;)</span>
              <span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">url</span><span class="tok-p tok-p-Indicator">:</span> <span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">https://jsonplaceholder.typicode.com/posts</span>
              <span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">headers</span><span class="tok-p tok-p-Indicator">:</span>
                <span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">Content-Type</span><span class="tok-p tok-p-Indicator">:</span> <span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">application/json</span>
              <span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">verb</span><span class="tok-p tok-p-Indicator">:</span> <span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">POST</span>
              <span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">body</span><span class="tok-p tok-p-Indicator">:</span> <span class="tok-p tok-p-Indicator">|</span>
                <span class="tok-no">$json(</span>
                  <span class="tok-no">{</span>
                    <span class="tok-no">id: 123,</span>
                    <span class="tok-no">title: &quot;My fist post&quot;</span>
                  <span class="tok-no">}</span>
                <span class="tok-no">)</span>

          <span class="tok-p tok-p-Indicator">-</span> <span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">description</span><span class="tok-p tok-p-Indicator">:</span> <span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">Validate post ID</span>
            <span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">script</span><span class="tok-p tok-p-Indicator">:</span> <span class="tok-p tok-p-Indicator">|</span>
              <span class="tok-no">if ($localData(&quot;postInfo&quot;).id != 123) {</span>
                <span class="tok-no">$fail($format(</span>
                  <span class="tok-no">&quot;We expected the post ID to be {0} but it was {1}&quot;,</span>
                  <span class="tok-no">123,</span>
                  <span class="tok-no">$localData(&quot;postInfo&quot;).id));</span>
              <span class="tok-no">}</span>

          <span class="tok-p tok-p-Indicator">-</span> <span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">description</span><span class="tok-p tok-p-Indicator">:</span> <span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">Validate post title</span>
            <span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">script</span><span class="tok-p tok-p-Indicator">:</span> <span class="tok-p tok-p-Indicator">|</span>
              <span class="tok-no">if ($localData(&quot;postInfo&quot;).title != &quot;My fist post&quot;) {</span>
                <span class="tok-no">$fail($format(</span>
                  <span class="tok-no">&quot;We expected the post title to be &#39;{0}&#39; but it was &#39;{1}&#39;&quot;,</span>
                  <span class="tok-no">&quot;My fist post&quot;,</span>
                  <span class="tok-no">$localData(&quot;postInfo&quot;).title));</span>
              <span class="tok-no">}</span></code></pre></div></div><div class="paragraph"><p>What next?</p></div><div class="ulist"><ul><li><p>Try creating and running your first test. Create a new file named <code>My API test.yaml</code> in the <code>tests</code> directory of the test repo, then copy &amp; paste in it the full contents of this last test we looked at. In the server UI, create a new test session to run the test named <code>My API test</code>. When the test is finished, click on the test session link in the UI to examine the test results and look at the session log. Before examining the session log, make sure to click the "Settings" button in the upper-right corner of the page and enable trace logging, so you can see the full session log.</p></li><li><p>Look over the documentation for the <a href="https://getopentest.org/reference/generic-keywords.html#httprequest">HttpRequest</a> action to get a general idea of what&#8217;s available.</p></li></ul></div><br><div id="disqus_thread"></div><script> (function() { var d = document, s = d.createElement('script'); s.src = 'https://getopentest.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div></div></div></div></div><footer><div class="container"><div class="row"><div class="col-sm-12"> <a href="#"><i class="fab fa-github"></i> GitHub</a>&nbsp; &nbsp;|&nbsp;&nbsp; <a href="https://github.com/mcdcorp/opentest/blob/master/LICENSE">MIT license</a></div></div></div></footer><script src="/js/jquery-2.2.4.min.js"></script> <script src="/js/side-toc.js"></script> <script src="/js/bootstrap.min.js"></script> <script src="/js/slick.min.js"></script> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-73340843-6"></script> <script defer src="/js/analytics.js"></script></body></html>
