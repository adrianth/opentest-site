<!DOCTYPE html><html lang=""><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><title>Working with test data - OpenTest</title><link href="/css/bootstrap.min.css" rel="stylesheet"><link href="/css/asciidoctor.css" rel="stylesheet"><link href="/css/italian-pop.css" rel="stylesheet"><link href="/css/pygments.css" rel="stylesheet"><link href="/css/style.css" rel="stylesheet"><link href="/css/slick.css" rel="stylesheet"><link href="/css/menu.css" rel="stylesheet"><link href="/css/home.css" rel="stylesheet"><link href="/css/footer.css" rel="stylesheet"><link rel="stylesheet" href="/css/document.css" media="screen" type="text/css"><link href="https://fonts.googleapis.com/css?family=Rubik" rel="stylesheet"><link href="https://fonts.googleapis.com/css?family=Pragati+Narrow" rel="stylesheet"> <script defer src="https://use.fontawesome.com/releases/v5.0.8/js/all.js"></script><meta name="keywords" content="opentest, data"></head><body><div id="menu-wrapper"><div class="container"><div class="row"><nav class="navbar main-menu" role="navigation"><div class="navbar-header"> <a class="navbar-brand" href="/"> <img src="/img/common/opentest.svg" /> OpenTest </a> <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-navbar-collapse-1"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button></div><div class="collapse navbar-collapse" id="bs-navbar-collapse-1"><ul class="nav navbar-nav navbar-right scrollable-menu"><li class="dropdown"> <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="true">Docs <span class="caret"></span></a><ul class="dropdown-menu"><li><a href="/docs/architecture.html">Architecture</a></li><li><a href="/docs/installation.html">Installation</a></li><li><a href="/docs/test-structure.html">Test structure</a></li><li><a href="/docs/test-action-types.html">Test action types</a></li><li><a href="/docs/test-data.html">Working with test data</a></li><li><a href="/docs/passing-data.html">Passing data between test steps</a></li><li><a href="/docs/data-driven-testing.html">Data-driven testing</a></li><li><a href="/docs/scripting-support.html">Scripting support</a></li></ul></li><li class="dropdown"> <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="true">Reference <span class="caret"></span></a><ul class="dropdown-menu"><li><a href="/reference/selenium-keywords.html">Selenium keywords</a></li><li><a href="/reference/appium-keywords.html">Appium keywords</a></li><li><a href="/reference/generic-keywords.html">Generic keywords</a></li><li><a href="/reference/javascript-api.html">JavaScript API</a></li></ul></li><li class="dropdown"> <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="true">Tutorials <span class="caret"></span></a><ul class="dropdown-menu"><li><a href="/tutorials/selenium-testing.html">Web testing</a></li><li><a href="/tutorials/appium-testing.html">Mobile testing</a></li><li><a href="/tutorials/api-testing.html">REST API testing</a></li></ul></li></ul></div></nav></div></div></div><div class="clearfix"></div><div class="main-content"><div class="page-content"><div class="container"><div class="row"><div class="col-md-3 hidden-sm hidden-xs" id="toc-col"><div id="docs-toc"><h3>Docs</h3><ul class="dropdown-menu1"><li><a href="/docs/architecture.html">Architecture</a></li><li><a href="/docs/installation.html">Installation</a></li><li><a href="/docs/test-structure.html">Test structure</a></li><li><a href="/docs/test-action-types.html">Test action types</a></li><li><a href="/docs/test-data.html">Working with test data</a></li><li><a href="/docs/passing-data.html">Passing data between<br>test steps </a></li><li><a href="/docs/data-driven-testing.html">Data-driven testing</a></li><li><a href="/docs/scripting-support.html">Scripting support</a></li></ul><h3>Reference</h3><ul class="dropdown-menu1"><li><a href="/reference/selenium-keywords.html">Selenium keywords</a></li><li><a href="/reference/appium-keywords.html">Appium keywords</a></li><li><a href="/reference/generic-keywords.html">Generic keywords</a></li><li><a href="/reference/javascript-api.html">JavaScript API</a></li></ul><h3>Tutorials</h3><ul class="dropdown-menu1"><li><a href="/tutorials/selenium-testing.html">Web testing</a></li><li><a href="/tutorials/appium-testing.html">Mobile testing</a></li><li><a href="/tutorials/api-testing.html">REST API testing</a></li></ul></div></div><div class="col-sm-9"><h1>Working with test data</h1><div class="toc-container"> <span class="toc-heading">Contents</span><ul class="sectlevel1"><li><a href="#the-data-function">The $data function</a></li><li><a href="#splitting-test-data-across-files-and-directories">Splitting test data across files and directories</a></li><li><a href="#storing-data-in-a-multi-level-hierarchy">Storing data in a multi-level hierarchy</a></li><li><a href="#referencing-data-files-from-other-data-files">Referencing data files from other data files</a></li><li><a href="#generating-test-data-dynamically">Generating test data dynamically</a></li></ul></div><hr><div class="sect1"><h2 id="the-data-function">The $data function</h2><div class="sectionbody"><div class="paragraph"><p>One of the best practices in test automation is to store test data separately from the test logic. There are two main reasons for this: the same piece of data is often used in several tests; typically, test data changes more often than the test logic. Separating the test data from the test execution logic makes it easier to fix the tests when, inevitably, changes occur in the application being tested.</p></div><div class="paragraph"><p>Let&#8217;s consider the test below:</p></div><div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="yaml"><span></span><span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">description</span><span class="tok-p tok-p-Indicator">:</span> <span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">Search for the &quot;react&quot; repo on the GitHub website</span>
<span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">actors</span><span class="tok-p tok-p-Indicator">:</span>
  <span class="tok-p tok-p-Indicator">-</span> <span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">actor</span><span class="tok-p tok-p-Indicator">:</span> <span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">WEB</span>
    <span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">segments</span><span class="tok-p tok-p-Indicator">:</span>
      <span class="tok-p tok-p-Indicator">-</span> <span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">segment</span><span class="tok-p tok-p-Indicator">:</span> <span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">1</span>
        <span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">actions</span><span class="tok-p tok-p-Indicator">:</span>
          <span class="tok-p tok-p-Indicator">-</span> <span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">description</span><span class="tok-p tok-p-Indicator">:</span> <span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">Navigate to GitHub</span>
            <span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">action</span><span class="tok-p tok-p-Indicator">:</span> <span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">org.getopentest.selenium.NavigateTo</span>
            <span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">args</span><span class="tok-p tok-p-Indicator">:</span>
              <span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">url</span><span class="tok-p tok-p-Indicator">:</span> <span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">https://github.com</span>

          <span class="tok-p tok-p-Indicator">-</span> <span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">description</span><span class="tok-p tok-p-Indicator">:</span> <span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">Type &quot;react&quot; in the search box and press Enter</span>
            <span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">action</span><span class="tok-p tok-p-Indicator">:</span> <span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">org.getopentest.selenium.SendKeys</span>
            <span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">args</span><span class="tok-p tok-p-Indicator">:</span>
              <span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">locator</span><span class="tok-p tok-p-Indicator">:</span> <span class="tok-p tok-p-Indicator">{</span> <span class="tok-nv">name</span><span class="tok-p tok-p-Indicator">:</span> <span class="tok-nv">q</span> <span class="tok-p tok-p-Indicator">}</span>
              <span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">text</span><span class="tok-p tok-p-Indicator">:</span> <span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">react</span>
              <span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">sendEnter</span><span class="tok-p tok-p-Indicator">:</span> <span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">true</span></code></pre></div></div><div class="paragraph"><p>This is a partial test that navigates to the GitHub homepage, types "react" into the search box and presses Enter, to perform the search. The test identifies the search box by looking for the <code>name</code> attribute of the corresponding <code>input</code> element. Currently, the <code>name</code> attribute has the value <code>q</code>, but we need to be prepared for when that name changes, and make it easy for us to modify the tests using it. Let&#8217;s rewrite the "SendKeys" action, but this time populate the <code>locator</code> argument from an external data file:</p></div><div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="yaml"><span></span><span class="tok-p tok-p-Indicator">-</span> <span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">description</span><span class="tok-p tok-p-Indicator">:</span> <span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">Type &quot;react&quot; in the search box and press Enter</span>
  <span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">action</span><span class="tok-p tok-p-Indicator">:</span> <span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">org.getopentest.selenium.SendKeys</span>
  <span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">args</span><span class="tok-p tok-p-Indicator">:</span>
      <span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">locator</span><span class="tok-p tok-p-Indicator">:</span> <span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">$data(&quot;locators&quot;).searchBox</span>
      <span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">text</span><span class="tok-p tok-p-Indicator">:</span> <span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">react</span>
      <span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">sendEnter</span><span class="tok-p tok-p-Indicator">:</span> <span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">true</span></code></pre></div></div><div class="paragraph"><p>The syntax <code>$data("locators").searchBox</code> tells the test actor to look for property named <code>searchBox</code> in the data file named <code>locators.yaml</code>.</p></div><div class="admonitionblock note"><table><tr><td class="icon"><div class="title">Note</div></td><td class="content"> By convention, all data files have to be placed in the <code>data</code> subdirectory of the test repo. This is why, when we ask for a data file using the <code>$data()</code> syntax, we only have to specify the path relative to the <code>test-repo-path/data</code> directory. Similarly, we don&#8217;t need to specify the <code>.yaml</code> extension, since the test actor will be looking for a YAML file by default. These conventions allow for a concise syntax and make the test definitions easier to read and troubleshoot.</td></tr></table></div><div class="paragraph"><p>Of course, for all this to work we must create the actual data file:</p></div><div class="listingblock"><div class="title">test-repo-path/data/locators.yaml</div><div class="content"><pre class="pygments highlight"><code data-lang="yaml"><span></span><span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">searchBox</span><span class="tok-p tok-p-Indicator">:</span> <span class="tok-p tok-p-Indicator">{</span> <span class="tok-nv">name</span><span class="tok-p tok-p-Indicator">:</span> <span class="tok-nv">q</span> <span class="tok-p tok-p-Indicator">}</span></code></pre></div></div><div class="paragraph"><p>Whenever the name of the search box element changes, we can change the <code>searchBox</code> property in this data file, and all the tests that interact with the search box element will again work properly.</p></div><div class="paragraph"><p>In real-world test automation scenarios test data can get quite complex. OpenTest recognizes this and allows testers the freedom to organize test data to best fit their particular use case. Read on to learn about some of the features and techniques that help with this.</p></div></div></div><div class="sect1"><h2 id="splitting-test-data-across-files-and-directories">Splitting test data across files and directories</h2><div class="sectionbody"><div class="paragraph"><p>The earlier example defined a <code>locators.yaml</code> data file that can be used to store the complete list of object locators. However, for a bigger application, you might want to think about splitting the data into multiple files - one file per each page, and put all these files in a directory called <code>locators</code>. This is even more useful for large teams because it helps avoiding merge conflicts in source control.</p></div><div class="paragraph"><p>To split your object locator data in multiple files, you can create a directory structure similar to the one below:</p></div><div class="listingblock"><div class="content"><pre class="pygments highlight"><code>test-repo
├── data
│   └── locators
│       ├── login.yaml
|       ├── home.yaml
|       └── products.yaml
└── tests
    └── ...</code></pre></div></div><div class="paragraph"><p>To reference these files, you can use the same <code>$data()</code> syntax, as long as you specify the correct relative path to the data file you want to access:</p></div><div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="yaml"><span></span><span class="tok-p tok-p-Indicator">-</span> <span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">description</span><span class="tok-p tok-p-Indicator">:</span> <span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">Type &quot;react&quot; in the search box and press Enter</span>
  <span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">action</span><span class="tok-p tok-p-Indicator">:</span> <span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">org.getopentest.selenium.SendKeys</span>
  <span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">args</span><span class="tok-p tok-p-Indicator">:</span>
      <span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">locator</span><span class="tok-p tok-p-Indicator">:</span> <span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">$data(&quot;locators/home&quot;).searchBox</span>
      <span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">text</span><span class="tok-p tok-p-Indicator">:</span> <span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">react</span>
      <span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">sendEnter</span><span class="tok-p tok-p-Indicator">:</span> <span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">true</span></code></pre></div></div><div class="admonitionblock note"><table><tr><td class="icon"><div class="title">Note</div></td><td class="content"> The argument passed to the <code>$data()</code> function is the path to the data file, relative to the <code>data</code> subdirectory of the test repo and excluding the <code>.yaml</code> extension.</td></tr></table></div></div></div><div class="sect1"><h2 id="storing-data-in-a-multi-level-hierarchy">Storing data in a multi-level hierarchy</h2><div class="sectionbody"><div class="paragraph"><p>Since data files are expressed in the YAML format, you can always use the whole set of features that YAML brings with it. For example, if you decide that the application under test is not complex enough to warrant splitting the object locators into multiple files, you can still group the locators by page inside one single data file, using this syntax:</p></div><div class="listingblock"><div class="title">test-repo-path/data/locators.yaml</div><div class="content"><pre class="pygments highlight"><code data-lang="yaml"><span></span><span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">login</span><span class="tok-p tok-p-Indicator">:</span>
  <span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">username</span><span class="tok-p tok-p-Indicator">:</span> <span class="tok-p tok-p-Indicator">{</span> <span class="tok-nv">id</span><span class="tok-p tok-p-Indicator">:</span> <span class="tok-nv">username</span> <span class="tok-p tok-p-Indicator">}</span>
  <span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">password</span><span class="tok-p tok-p-Indicator">:</span> <span class="tok-p tok-p-Indicator">{</span> <span class="tok-nv">id</span><span class="tok-p tok-p-Indicator">:</span> <span class="tok-nv">password</span> <span class="tok-p tok-p-Indicator">}</span>

<span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">home</span><span class="tok-p tok-p-Indicator">:</span>
  <span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">searchBox</span><span class="tok-p tok-p-Indicator">:</span> <span class="tok-p tok-p-Indicator">{</span> <span class="tok-nv">name</span><span class="tok-p tok-p-Indicator">:</span> <span class="tok-nv">q</span> <span class="tok-p tok-p-Indicator">}</span></code></pre></div></div><div class="paragraph"><p>To reference the search box element on the homepage, you can use the syntax <code>$data("locators").home.searchBox</code>.</p></div><div class="paragraph"><p>While this hierarchy can go as deep as you need it to, we recommend to avoid using more than two levels, to make the data file easier to read and maintain.</p></div></div></div><div class="sect1"><h2 id="referencing-data-files-from-other-data-files">Referencing data files from other data files</h2><div class="sectionbody"><div class="paragraph"><p>While this might not seem like a very useful thing to do, at times you&#8217;ll find yourself wanting to split your data properties in a way that requires being able to read a data property from a data file and use it, maybe with some slight alterations, in a different data file.</p></div><div class="paragraph"><p>Let&#8217;s say you have a data file called "environment.yaml" that stores the environment settings for some API test suite:</p></div><div class="listingblock"><div class="title">test-repo-path/data/environment.yaml</div><div class="content"><pre class="pygments highlight"><code data-lang="yaml"><span></span><span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">baseUrl</span><span class="tok-p tok-p-Indicator">:</span> <span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">https://my.domain.com</span>
<span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">username</span><span class="tok-p tok-p-Indicator">:</span> <span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">john_doe</span>
<span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">password</span><span class="tok-p tok-p-Indicator">:</span> <span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">sk67E8qL</span></code></pre></div></div><div class="paragraph"><p>You can then store the URLs for various API in a different data file, by concatenating the base URL from <code>environment.yaml</code> with the rest of the URL, like this:</p></div><div class="listingblock"><div class="title">test-repo-path/data/urls.yaml</div><div class="content"><pre class="pygments highlight"><code data-lang="yaml"><span></span><span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">customerApiUrl</span><span class="tok-p tok-p-Indicator">:</span> <span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">$data(&quot;environment&quot;).baseUrl + &quot;/customer&quot;</span>
<span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">productApiUrl</span><span class="tok-p tok-p-Indicator">:</span> <span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">$data(&quot;environment&quot;).baseUrl + &quot;/product&quot;</span></code></pre></div></div><div class="admonitionblock note"><table><tr><td class="icon"><div class="title">Note</div></td><td class="content"> The expressions used to build the API URLs are written in JavaScript. The test actor will evaluate the JavaScript expressions and use the results as values for the corresponding properties. More on this in the <a href="https://getopentest.org/docs/scripting-support.html">scripting support</a> section.</td></tr></table></div></div></div><div class="sect1"><h2 id="generating-test-data-dynamically">Generating test data dynamically</h2><div class="sectionbody"><div class="paragraph"><p>Since the value of a data property can be an arbitrary JavaScript expression, there&#8217;s a lot of flexibility as to what you can do to generate it. For example, to generate a random user id, you could do something like this:</p></div><div class="listingblock"><div class="title">test-repo-path/data/environment.yaml</div><div class="content"><pre class="pygments highlight"><code data-lang="yaml"><span></span><span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">userId</span><span class="tok-p tok-p-Indicator">:</span> <span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">$script &quot;user&quot; + (1 + Math.floor(Math.random() * 999))</span></code></pre></div></div><div class="paragraph"><p>You may have noticed that the <code>$script</code> syntax is not valid JavaScript code. This is just a prefix that lets the test actor know that we want whatever follows after it to be interpreted as JavaScript code. If we don&#8217;t include the <code>$script</code> prefix, the test actor will think that we are specifying just an ordinary string literal. In the <a href="https://getopentest.org/docs/scripting-support.html">scripting support</a> section we elaborate on the logic used by the test actor to distinguish between string literals and JavaScript expressions.</p></div><hr><div class="paragraph"><p>Next: <a href="https://getopentest.org/docs/passing-data.html">Passing data between test actions</a></p></div></div></div><br><div id="disqus_thread"></div><script> (function() { var d = document, s = d.createElement('script'); s.src = 'https://getopentest.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div></div></div></div></div><footer><div class="container"><div class="row"><div class="col-sm-12"><p> <a href="#"><i class="fab fa-github"></i> GitHub</a>&nbsp;&nbsp;|&nbsp;&nbsp;<a href="https://github.com/mcdcorp/opentest/blob/master/LICENSE">MIT license</a></p></div></div></div></footer><script src="/js/jquery-2.2.4.min.js"></script> <script src="/js/side-toc.js"></script> <script src="/js/bootstrap.min.js"></script> <script src="/js/slick.min.js"></script> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-73340843-6"></script> <script defer src="/js/analytics.js"></script></body></html>
