<!DOCTYPE html><html lang=""><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><title>Passing data between test steps - OpenTest</title><link href="/css/bootstrap.min.css" rel="stylesheet"><link href="/css/asciidoctor.css" rel="stylesheet"><link href="/css/italian-pop.css" rel="stylesheet"><link href="/css/pygments.css" rel="stylesheet"><link href="/css/style.css" rel="stylesheet"><link href="/css/slick.css" rel="stylesheet"><link href="/css/menu.css" rel="stylesheet"><link href="/css/home.css" rel="stylesheet"><link rel="stylesheet" href="/css/document.css" media="screen" type="text/css"><link href="https://fonts.googleapis.com/css?family=Rubik" rel="stylesheet"><link href="https://fonts.googleapis.com/css?family=Pragati+Narrow" rel="stylesheet"> <script defer src="https://use.fontawesome.com/releases/v5.0.8/js/all.js"></script><meta name="keywords" content="opentest, data"></head><body><div class="menu-wrapper"><div class="container"><div class="row"><nav class="navbar main-menu" role="navigation"><div class="navbar-header"> <a class="navbar-brand" href="/"> <img src="/img/common/opentest.svg" /> OpenTest </a> <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-navbar-collapse-1"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button></div><div class="collapse navbar-collapse" id="bs-navbar-collapse-1"><ul class="nav navbar-nav navbar-right scrollable-menu"><li class="dropdown"> <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="true">Docs <span class="caret"></span></a><ul class="dropdown-menu"><li><a href="/docs/architecture.html">Architecture</a></li><li><a href="/docs/installation.html">Installation</a></li><li><a href="/docs/test-structure.html">Test structure</a></li><li><a href="/docs/test-action-types.html">Test action types</a></li><li><a href="/docs/test-data.html">Working with test data</a></li><li><a href="/docs/passing-data.html">Passing data between test steps </a></li></ul></li><li class="dropdown"> <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="true">Reference <span class="caret"></span></a><ul class="dropdown-menu"><li><a href="/reference/selenium-keywords.html">Selenium test actions (keywords)</a></li><li><a href="/reference/appium-keywords.html">Appium test actions (keywords)</a></li><li><a href="/reference/javascript-api.html">JavaScript API</a></li></ul></li><li> <a href="https://github.com/mcdcorp/opentest" target="_blank">GitHub <i class="fas fa-external-link-alt"></i></a></li></ul></div></nav></div></div></div><div class="clearfix"></div><div class="main-content"><div class="page-content"><div class="container"><div class="row"><div class="col-sm-3"></div><div class="col-sm-9"><h1>Passing data between test steps</h1><div class="toc-container"> <span class="toc-heading">Contents</span><ul class="sectlevel1"><li><a href="#local-data-localdata">Local data ($localData)</a></li><li><a href="#shared-data-shareddata">Shared data ($sharedData)</a></li><li><a href="#session-data-sessiondata">Session data ($sessionData)</a></li></ul></div><div class="paragraph"><p>With any type of test automation there are many scenarios that require transferring data between test steps (e.g. reading the order number generated by an e-commerce application and using it in a subsequent step to verify the status of the order). OpenTest provides three techniques to achieve this:</p></div><div class="ulist"><ul><li><p>The <strong>local data store</strong>, used when the data needs to be accessible only to test steps executed by the same test actor.</p></li><li><p>The <strong>shared data store</strong>, used when the data needs to be accessible across multiple test actors participating in a distributed test.</p></li><li><p>The <strong>session data store</strong>, used when the data needs to be accessible across multiple test actors and multiple tests executing as part of the same test session.</p></li></ul></div><div class="sect1"><h2 id="local-data-localdata">Local data ($localData)</h2><div class="sectionbody"><div class="paragraph"><p>When a data value is only going to be needed in subsequent test actions running on the same test actor, the best technique to use is the local data store. This technique doesn&#8217;t incur any network traffic so it&#8217;s really fast. You can think of the local data store as a simple in-memory hash map (which is exactly what it is) that you can add properties to, so that you can retrieve them later and use them as arguments for a subsequent test action.</p></div><div class="paragraph"><p>There are two ways to access the data values in the local data store:</p></div><div class="ulist"><ul><li><p>The <code>$localData</code> global test action argument. This argument can be specified for any regular test action or macro action. The value passed to this argument must be an object that contains one or more key-value pairs specifying the properties to write to the local data store. Here&#8217;s an example of how we can write a property called "username" with the value that was outputted from a ReadElementText action:</p><div class="listingblock"><div class="content"><pre class="pygments highlight"><code>- description: |
    Read the username and write it to the "username" local
    data property
  action: org.getopentest.selenium.ReadElementText
  args:
      locator: {css: p.username}
      $localData:
        username: $readOutput("text")

- description: Write the username into the "username" text box
  action: org.getopentest.selenium.SendKeys
  args:
    locator: {css: "input[name='username']"}
    text: $localData("username")</code></pre></div></div></li><li><p>The <code>$localData</code> JavaScript function. The function can be called with one parameter to read a local data property, or with two parameters to write the value of a local data property. It has the syntax <code>$localData(propName, [propValue])</code>. Example:</p><div class="listingblock"><div class="content"><pre class="pygments highlight"><code>- script: |
    // Write the "username" property to local data
    $localData("username", "john_doe");

    // Read the username and log it
    $log("The username is " + $localData("username"));</code></pre></div></div></li></ul></div></div></div><div class="sect1"><h2 id="shared-data-shareddata">Shared data ($sharedData)</h2><div class="sectionbody"><div class="paragraph"><p>Ideally, a test should only make use of the local data store. However, when multiple test actors that participate in the same test need to share data with each other (and they typically do), you must use the shared data store technique instead. This works in a similar way with the local data store, but incurs a small performance penalty due to the additional network traffic it generates: the data is first sent to the sync service by the actor that is writing the data property; later on, it is requested from the sync service by the actor that needs to make use of it. Please make sure to only use the shared data store when you need to transfer data across actors, and use local data for all other needs. Just like with local data, there are two ways to acces the shared data store:</p></div><div class="ulist"><ul><li><p>The <code>$sharedData</code> global test action argument. This argument can be specified for any regular test action or macro action. The value passed to this argument must be an object that contains one or more key-value pairs specifying the properties to write to the shared data store. Here&#8217;s an example of how we can write a property called "username" with the value that was outputted from a ReadElementText action:</p><div class="listingblock"><div class="title">ACTOR 1</div><div class="content"><pre class="pygments highlight"><code>- description: |
    Read the username and write it to the "username" shared
    data property
  action: org.getopentest.selenium.ReadElementText
  args:
      locator: {css: p.username}
      $sharedData:
        username: $readOutput("text")</code></pre></div></div><div class="listingblock"><div class="title">ACTOR 2</div><div class="content"><pre class="pygments highlight"><code>- description: Write the username into the "username" text box
  action: org.getopentest.selenium.SendKeys
  args:
    locator: {css: "input[name='username']"}
    text: $sharedData("username")</code></pre></div></div></li><li><p>The <code>$sharedData</code> JavaScript function. The function can be called with one parameter to read a local data property, or with two parameters to write the value of a local data property. It has the syntax <code>$sharedData(propName, [propValue])</code>. Example:</p><div class="listingblock"><div class="title">ACTOR 1</div><div class="content"><pre class="pygments highlight"><code>- script: |
    // Write the "username" property to shared data
    $sharedData("username", "john_doe");</code></pre></div></div><div class="listingblock"><div class="title">ACTOR 2</div><div class="content"><pre class="pygments highlight"><code>- script: |
    // Read the username and log it
    $log("The username is " + $sharedData("username"));</code></pre></div></div></li></ul></div></div></div><div class="sect1"><h2 id="session-data-sessiondata">Session data ($sessionData)</h2><div class="sectionbody"><div class="paragraph"><p>The session data store helps with sharing data between multiple tests in the same test session. Using the session data store creates dependencies between tests, which can be very hard to manage and control, so, as a best practice, avoid using it at all costs. Troubleshooting failed tests that use <code>$sessionData</code> is much more difficult, since you not only need to understand what happened in the test that failed, but also in all the other tests that executed before it in the same session. The syntax for working with the session data store is similar with the local and shared data stores, but using the <code>$sessionData</code> global action argument or the <code>$sessionData</code> JavaScript function.</p></div></div></div></div></div></div></div></div><footer><div class="container"><div class="row"><div class="col-md-8"></div></div></div></footer><script src="/js/jquery-2.2.4.min.js"></script> <script src="/js/bootstrap.min.js"></script> <script src="/js/slick.min.js"></script> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-73340843-6"></script> <script src="/js/analytics.js"></script></body></html>
